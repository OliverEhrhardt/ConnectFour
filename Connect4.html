<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript">
			window.onload = function(){
				board = new build($("container").children, 1, null);
				document.getElementById("container").addEventListener("click", isTurn, false);
			}
			function $(id){
				return document.getElementById(id);
			}
			var turn = true;
			function isTurn(){
				var x = $("turns");
				if(turn === true){
					x.innerHTML = "Red";
					x.style.color = "#780000";
				}
				else if(turn === false){
					x.innerHTML = "Blue";
					x.style.color = "#005d78";
				}
			}
			function build(column, pieces, colorId){				
				this.column = column;
				for(var a in this.column){
					this.column[a].pieces = pieces;
					var x = this.column[a];
					for(var b in x.children){
						x.children[b].colorId = colorId;
					}
				}
				this.add = function(c){
					var x = this.column[c];
					if(turn === true && x.pieces < x.children.length + 1){
						x.children[x.children.length - x.pieces].style.background = "#780000";
						x.children[x.children.length - x.pieces].colorId = true;
						x.pieces++;
						turn = false;
					}
					else if(x.pieces < x.children.length + 1){
						x.children[x.children.length - x.pieces].style.background = "#005d78";
						x.children[x.children.length - x.pieces].colorId = false;
						x.pieces++;
						turn = true;
					}
					checkWin();
				}
			}
			
			function checkVert(){
				//console.log("checking verticle");
				var red = 0;
				var black = 0;
				for(a=0;a<board.column.length;a++){
					var x = board.column[a];
					for(b=0;b<x.children.length;b++){
						var y = x.children[b];
						if(y.colorId === true){
							red++;
							//console.log("red:"+red);
							if(red === 4){
								//console.log(red);
								return "red"; break;
								break;
							}
						}
						else{
							red = 0;
						}
						if(y.colorId === false){
							black++;
							//console.log("black:"+black);
							if(black === 4){
								return "black";
								break;
							}
						}
						else{
							black = 0;
						}
					}

				}

			}
			function checkHorz(){
				//console.log("checking horizontal");
				var red = 0;
				var black = 0;
				var horzCheck = 0;
				while(horzCheck < board.column[0].children.length){
					for(a = 0;a<board.column.length;a++){
						var x = board.column[a];
						if(x.children[horzCheck].colorId === true){
							red++;
							//console.log("red:" + red);
							if(red === 4){
								return "red"; 
								break;
							}
						}
						else{
							red = 0;
						}
						if(x.children[horzCheck].colorId === false){
							black++;
							//console.log("black:" + black);
							if(black === 4){
								return "black";
								break;
							}
						}
						else{
							black = 0;
						}
					}
					horzCheck++;
				}
			}
			
			function checkDiag(){
				red = 0;
				black = 0;
				switch1 = true;
				switch2 = true;
				reset = false;
				run = 0;
				a = 0;
				b = 2;
				saveB = b;
				while(run<board.column[0].children.length){
					while(a<board.column.length){
						var x = board.column[a];
							while(b<x.children.length){
								var y = x.children[b];
								console.log(y);
								if(b === x.children.length-1){
									//console.log(b);
									reset = true;
								}
								if(b === 0){
									reset = true;
								}
								if(y.colorId === true){
									red++;
									//console.log("red:"+red);
									if(red === 4){
										return "red"; break;
										break;
									}
								}
								else{
									red = 0;
								}
								if(y.colorId === false){
									black++;
									//console.log("black:"+black);
									if(black === 4){
										return "black";
										break;
									}
								}
								else{
									black = 0;
								}
								if(switch2 === true){
									b++;
								}
								else{
									b--;
								}
								break;
							}
							if(reset === true){
								reset = false;
								if(switch2 === true){
									b = saveB - 1;
									saveB = b
									if(switch1 === true){
										a = 0;
										red = 0;
										black = 0;
									}
									else{
										a = board.column.length;
										red = 0;
										black = 0;
									}

								}
								else{
									b = saveB + 1;
									saveB = b;
									if(switch1 === true){
										a = 0;
										red = 0;
										black = 0;
									}
									else{
										a = board.column.length;
										red = 0;
										black = 0;
									}
								}
								break;
							}
							if(switch1 === true){
								a++;
							}
							else{
								a--;
							}
					}
					
					run++
				}
			}
		</script>
		<style type="text/css">
			Body{background:#474747;}
			#turns{
				position:absolute;
				width:700px;
				height:100px;
				left: 50%;
				margin-left:-350px;
				font-size:200%;
				font-family:Tahoma, Geneva, sans-serif;
				color:#780000;
				text-align:center;
				float:top;
			}
			#container{
				position:absolute;
				width:700px;
				height:610px;
				top:50%;
				left:50%;
				margin-top:-305px;
				margin-left:-350px;
			}
			.board{
				-webkit-user-select: none;
				-moz-user-select: none;
				-ms-user-select: none;
				position absolute;
				height: 610px;
				width: 100px;
				float: left;
			}
			.circle{
				position: relative;
				border-radius: 50%;
				width: 90px;
				height: 90px;
				margin-top: 10px;
				margin-left:5px;
				box-shadow:2px 2px 5px rgba(0, 0, 0, .3) inset;
				background: #373737;
			}
		</style>
	</head>
	<body>
		<div id="turns">Red</div>
		<div id="container">
			<div class="board" id="board0" onclick="board.add(0)"> 
				<div class="circle" id="circle1"></div>
				<div class="circle" id="circle2"></div>
				<div class="circle" id="circle3"></div>
				<div class="circle" id="circle4"></div>
				<div class="circle" id="circle5"></div>
				<div class="circle" id="circle6"></div>
			</div>
			<div class="board" id="board1" onclick="board.add(1)">
				<div class="circle" id="circle7"></div>
				<div class="circle" id="circle8"></div>
				<div class="circle" id="circle9"></div>
				<div class="circle" id="circle10"></div>
				<div class="circle" id="circle11"></div>
				<div class="circle" id="circle12"></div>
			</div>
			<div class="board" id="board2" onclick="board.add(2)">
				<div class="circle" id="circle13"></div>
				<div class="circle" id="circle14"></div>
				<div class="circle" id="circle15"></div>
				<div class="circle" id="circle16"></div>
				<div class="circle" id="circle17"></div>
				<div class="circle" id="circle18"></div>
			</div>
			<div class="board" id="board3" onclick="board.add(3)">
				<div class="circle" id="circle19"></div>
				<div class="circle" id="circle20"></div>
				<div class="circle" id="circle21"></div>
				<div class="circle" id="circle22"></div>
				<div class="circle" id="circle23"></div>
				<div class="circle" id="circle24"></div>
			</div>
			<div class="board" id="board4" onclick="board.add(4)">
				<div class="circle" id="circle25"></div>
				<div class="circle" id="circle26"></div>
				<div class="circle" id="circle27"></div>
				<div class="circle" id="circle28"></div>
				<div class="circle" id="circle29"></div>
				<div class="circle" id="circle30"></div>
			</div>
			<div class="board" id="board5" onclick="board.add(5)">
				<div class="circle" id="circle31"></div>
				<div class="circle" id="circle32"></div>
				<div class="circle" id="circle33"></div>
				<div class="circle" id="circle34"></div>
				<div class="circle" id="circle35"></div>
				<div class="circle" id="circle36"></div>
			</div>
			<div class="board" id="board6" onclick="board.add(6)">
				<div class="circle" id="circle37"></div>
				<div class="circle" id="circle38"></div>
				<div class="circle" id="circle39"></div>
				<div class="circle" id="circle40"></div>
				<div class="circle" id="circle41"></div>
				<div class="circle" id="circle42"></div>
			</div>
		</div>
	</body>
</html>
